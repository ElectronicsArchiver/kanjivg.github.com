---
layout: default
title: Format
name: format.html
---

<div class="page-header">
  <h1>KanjiVG file format</h1>
</div>

<p>
  KanjiVG is designed as an extension of SVG. All KanjiVG files are
  100% SVG-compliant and can be opened by any SVG viewer or editor
  as-is. The shape of each kanji stroke (an individual line) is
  described as an
  <a href="http://www.w3.org/TR/SVG/paths.html#PathData">SVG path</a>
  on an area of size 109x109.
</p>

<p>
  The SVG file is organized in such a way that it reflects the
  structure and stroke order of the kanji.  Furthermore, several
  additional attributes are added in order to provide extra
  information about the kanji's structure.
</p>

<p class='undocumented'>
  Undocumented and unknown features, and notes on possible flaws in
  the data, are distinguished with a pale green background.
</p>

<h2>Character models</h2>

<p>
  The main graphical data is is based on schoolbook fonts
  (<nobr><ruby>教科書体<rt>きょうかしょたい</rt></ruby></nobr>), which
  is a variation of the calligraphic kaisho style 

  (<nobr><ruby>楷書<rt>かいしょ</rt></ruby></nobr>). 
</p>

<p>
  There is data for variations of characters and stroke order. When
  characters in schoolbook style deviate from traditional kaisho,
  there might be an extra version for kaisho, labelled with the
  suffix <code>-Kaisho</code>. There are also different versions for
  different stroke orders.
</p>

<h3>Variant suffixes</h3>

<p>
  The following is a complete list of the file suffixes used to
  indicate variant forms. Not all of them are known.
</p>

<dl>
<dt>Hyougai
<dd>
Variant forms of the character, called "hyougai"

(<ruby>表外<rt>ひょうがい</rt></ruby>) in
Japanese. <span class='undocumented'>These are often the characters
for different Unicode code points, or otherwise inconsistent.</a>

<dt>HzFst
<dd>
<b>H</b>ori<b>z</b>ontal <b>F</b>ir<b>st</b> stroke order
<dt>HzFstLeRi
<dd>
Horizontal First, Left to Right stroke order
<dt>HzFstRiLe
<dd>
Horizontal First, Right to Left stroke order
<dt>HzFstVtLst
<dd>
Horizontal First, Vertical Last
<dt>HzLst
<dd>
Vertical Last
<dt>Insatsu
<dd>
Printed form (<ruby>印刷<rt>いんさつ</rt></ruby>), where it differs
from the schoolbook format. <span class='undocumented'>This is used
inconsistently.</span>
<dt>Jinmei
<dd>
Versions of the character used for names, which appear in the Jinmei
(<ruby>人名<rt>じんめい</rt></ruby>)
list. <span class='undocumented'>In practice these often refer to
different Unicode code points than the ones given.</span>
<dt>Kaisho
<dd>
<dt>LeFst
<dd>
Left First
<dt>MdLst
<dd>
Middle Last
<dt>MidFst
<dd>
Middle First
<dt>Ten3
<dd>
These characters all contain a 必 element, with the strokes in a
different order than usual.
<dt>TenLst
<dd>
These characters all contain a 卵 element, with the centre right
shortest stroke coming last in the stroke order.
<dt>Vt4
<dd>
These characters contain a variant stroke order with a vertical as the
fourth stroke.
<dt>Vt6
<dd>
These characters contain a variant stroke order with a vertical as the
sixth stroke.
<dt>VtFst
<dd>
Vertical First
<dt>VtFstRiLe
<dd>
Vertical First Right to Left
<dt>VtLst
<dd>
Vertical Last
</dl>

<h2>SVG Groups</h2>

<p id='strokepaths-intro'>
  There are two
  root <a href="http://www.w3.org/TR/SVG/struct.html#Groups">SVG
  groups</a>. The <strong>StrokePaths</strong> group is a set of
  standard SVG paths that gives the strokes of the kanji in the right
  order. It also contains groups which describe the structure of the
  kanji, such as its decomposition into radicals
</p>

<p id='strokenumbers-intro'>
  The <strong>StrokeNumbers</strong> group is an optional group that
  gives a convenient position
  for <a href="#stroke-numbers">stroke-order numbers</a>, useful for
  displaying in printed material for instance. The stroke numbers are
  positioned near their corresponding strokes, at their starting
  points.
</p>


<h2 id='strokepaths-groups'>StrokePaths groups</h2>

<p>
  Kanji are often made of several components. For instance,
  <a href="viewer.html?kanji=頑">頑</a> can be seen as a combination of
  <a href="viewer.html?kanji=元">元</a> on its left and
  <a href="viewer.html?kanji=頁">頁</a> on its right. KanjiVG uses SVG
  groups to reflect this structure, so the KanjiVG entry contains two
  groups under the parent <code>StrokePaths</code> group containing
  the left and right side of the kanji. The 元 and 頁 are encoded in
  these groups under their <a href='#element'>element</a>
  attributes. SVG groups provide an elegant way to collect strokes
  into a given group.
</p>

<p>
  This section explains the SVG attributes used in the groups under
  the <strong>StrokePaths</strong> group which describe the structure
  of a kanji, such as radicals and other sub-elements.
</p>

<h3>General attributes</h3>

<h4 id="group-id">id</h4>

<p>
  The KanjiVG identification number for this group. It contains the
  Unicode value of the kanji as a five-digit lower-case hexadecimal
  number, followed by a hyphen and the letter "g", followed by a decimal
  number from one to the total number of groups.
</p>

<p>
  The group ID numbers are always consecutive positive whole numbers.
</p>

<h3>KVG namespace attributes</h3>

<p>
  All these attributes are placed under the <strong>kvg</strong>
  namespace, for example <code>kvg:original="家"</code>
</p>


<h4 id="element">element</h4>

<p>
  This attribute specifies which kanji best represents the group
  physically. It should be the Unicode character that resembles the
  group as much as possible.
</p>

<h4 id="number">number</h4>

<p>
  This attribute allows a group to be identified if its element is
  represented several times in the kanji.
</p>

<h4 id="original">original</h4>

<p>
  This attribute specifies which kanji represents the group from a
  semantic point of view.  This attribute only needs to be present if
  there is a difference between the semantic and physical
  representation of the group.
</p>

<p>
  For example, <a href="viewer.html?kanji=仮">仮</a> has two groups.
  The left one has <a href="viewer.html?kanji=亻">亻</a>
  (called <em>ninben</em>) for its <code>element</code> attribute, and
  <a href="viewer.html?kanji=人">人</a>, meaning "person", for
  its <code>original</code> attribute, because <em>ninben</em> is a
  variation of 人.  However, the right side has
  <a href="viewer.html?kanji=反">反</a> for <code>element</code>,
  which is not a variation, so an <code>original</code> attribute is
  not necessary.
</p>

<figure>
<pre>
&lt;g id="kvg:StrokePaths_04eee" style="fill:none;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;"&gt;
&lt;g id="kvg:04eee" kvg:element="仮"&gt;
	&lt;g id="kvg:04eee-g1" <span style='color:red'>kvg:element="亻"</span> kvg:variant="true" <span style='color:red'>kvg:original="人"</span> kvg:position="left" kvg:radical="general"&gt;
		&lt;path id="kvg:04eee-s1" kvg:type="㇒" d="M32.01,17c0.22,1.93-0.31,3.72-1.02,5.37C26.5,32.93,20.8,42.85,10.5,55.7"/&gt;
		&lt;path id="kvg:04eee-s2" kvg:type="㇑" d="M25.48,37.5c0.57,0.57,1,1.69,1,3.24c0,11.3,0,33.32,0,46.02c0,3.05,0,5.56,0,7.25"/&gt;
	&lt;/g&gt;
	&lt;g id="kvg:04eee-g2" <span style='color:red'>kvg:element="反"</span> kvg:position="right" kvg:phon="叚V/反"&gt;
		&lt;g id="kvg:04eee-g3" kvg:element="厂"&gt;
			&lt;path id="kvg:04eee-s3" kvg:type="㇐" d="M47.34,22.01c1.27,0.33,3.61,0.53,4.86,0.33c11.42-1.84,23.3-4.59,32.75-5.84c2.08-0.27,3.38,0.16,4.44,0.32"/&gt;
			&lt;path id="kvg:04eee-s4" kvg:type="㇒" d="M52.65,23.81c1.14,1.14,1.49,2.48,1.42,4.7c-0.74,22.33-5.06,47.31-16.01,61.4"/&gt;
		&lt;/g&gt;
		&lt;g id="kvg:04eee-g4" kvg:element="又"&gt;
			&lt;path id="kvg:04eee-s5" kvg:type="㇇" d="M56.7,41.74c1.51,0.37,2.95,0.43,5.97-0.13c3.02-0.56,15.29-4.17,17.37-4.71c2.97-0.77,4.79,1.08,3.83,4.1c-6.62,20.75-11.62,38.63-36.26,53.52"/&gt;
			&lt;path id="kvg:04eee-s6" kvg:type="㇏" d="M56.12,52.12c5.64,0.81,18.99,22.02,31.03,33.71c2.35,2.29,5.22,4.66,7.84,6.11"/&gt;
		&lt;/g&gt;
	&lt;/g&gt;
&lt;/g&gt;
&lt;/g&gt;
</pre>
<figcaption>
  Illustration of the structure of the KanjiVG file for 仮 (U+4EEE).
</figcaption>
</figure>

<h4 id="part">part</h4>

<p>
  When the elements of a group of kanji strokes which forms a larger
  unit are not consecutive strokes, the group of strokes may be spread
  over several groups of paths in the file. The <strong>part</strong>
  attribute allows numbering these groups and defined them as being
  part of the same component.
</p>

<h4 id="partial">partial</h4>

<p>
  Should be present and set to <strong>true</strong> if the group only
  represents the <strong>element</strong> attribute partially, i.e. if
  not all its strokes are present.
</p>

<h4 id="phon">phon</h4>

<p>
  A large number of kanji consist of a radical and a phoneticum, the
  Sino-Japanese pronunciation. The <code>phon</code> attribute should
  mark the part indicating the pronunciation.
</p>

<h4 id="position">position</h4>
<p>
  Defines where this groups is located with respect to the other
  groups with the same parent. Possible values are
</p>

<dl>

<dt id="bottom">bottom
<dd>
This part is under another part.

<dt id="kamae">kamae
<dd>
This part is wrapped around another part, such as 門.

<dt id="left">left
<dd>
This part is left of another part.

<dt id="nyo">nyo
<dd>
This part is left and under another part, such as 辶.

<dt id="right">right
<dd>
This part is right of another part.

<dt id="tare">tare
<dd>
This part is left and above another part, such as 广.
<span class='undocumented'>This is used inconsistently in
KanjiVG.</span>

<dt id="top">top
<dd>
This part is above another part.
</dl>

<h4 id="radical">radical</h4>

<p>
  Defines if this group is considered as a radical (部首) of the
  kanji, and by which reference. Possible values:
  <strong>general</strong> for the generally accepted
  radical, <strong>nelson</strong> for the radicals from the original
  Nelson kanji dictionary, or <strong>tradit</strong> where the Kangxi
  radical disagrees with Nelson.
</p>
<p>
This use of the Nelson radicals is based on that
of <a href="http://www.edrdg.org/wiki/index.php/KANJIDIC_Project">Kanjidic</a>.
</p>

<figure>
<pre>
&lt;g id="kvg:04e94" kvg:element="五"&gt;
	<span style='color:red'>&lt;g id="kvg:04e94-g1" kvg:element="二" kvg:part="1" kvg:radical="tradit"&gt;</span>
		<span style='color:red'>&lt;g id="kvg:04e94-g2" kvg:element="一" kvg:radical="nelson"&gt;</span>
			&lt;path id="kvg:04e94-s1" kvg:type="㇐" d="M31.75,23.15c2.8,0.67,5.54,0.42,8.36,0.12c9.3-0.99,22.18-2.4,34.14-3.21c2.49-0.17,5.04-0.33,7.5,0.2"/&gt;
		&lt;/g&gt;
	&lt;/g&gt;
	&lt;path id="kvg:04e94-s2" kvg:type="㇑a" d="M55.75,25.25c0.62,1.25,1.02,3.01,0.5,5c-3.12,11.88-14,44.12-19.75,59"/&gt;
	&lt;path id="kvg:04e94-s3" kvg:type="㇕c" d="M25.5,55.25c2.07,1.24,4.73,1.03,7,0.81c15.49-1.45,29.89-3.03,42.25-4.06c3-0.25,4.25,1.75,3.5,3.75c-2.24,5.96-6,20.75-7.75,31.5"/&gt;
	<span style='color:red'>&lt;g id="kvg:04e94-g3" kvg:element="二" kvg:part="2" kvg:radical="tradit"&gt;</span>
		&lt;path id="kvg:04e94-s4" kvg:type="㇐" d="M11.25,90.5c3.04,0.81,6.52,0.63,9.63,0.41c15.71-1.1,43.9-2.8,67.75-3.8c3.41-0.14,6.9-0.4,10.25,0.39"/&gt;
	&lt;/g&gt;
&lt;/g&gt;
</pre>
<figcaption>
  The kanji for "five", 五, has a traditional Kangxi radical 二, which
  is split into two parts, the upper and lower character, and a Nelson
  radical of 一, which is the upper character. The two parts of the 二
  are given <a href="#part">part</a> numbers of 1 and 2.
</figcaption>
</figure>

<h4 id="radicalForm">radicalForm</h4>

<p>
  This is set to the value <strong>true</strong> for a limited number
  of groups where a radical-like form of a character described
  by <a href="#original">original</a> is provided as
  the <a href="#element">element</a>.
</p>

<h4 id="tradForm">tradForm</h4>

<p>
  The Kanjidic file with which Ulrich Apel worked in the beginning
  favored the radicals given in the Nelson character dictionary, which
  sometimes differ from the radicals given in "traditional" Japanese
  dictionaries and have mark-up as well.
</p>

<h4 id="variant">variant</h4>
<p>
  Should be present and set to <strong>true</strong> if the group is
  from the
  <strong>element</strong> attribute.
</p>

<h2>Strokes</h2>

<p>
  Each individual kanji stroke is represented by one SVG &lt;path&gt;
  element.
</p>


<h3>General attributes</h3>

<h4 id="d">d</h4>

<p>
  The SVG path information itself. This describes the shape of the
  line.
</p>

<p>
  Although there is no rule disallowing various SVG elements, in
  practice all of the KanjiVG data consists of M/m, C/c, and S/s
  elements, so the entirety of all of the KanjiVG strokes are solely
  cubic bezier curves. There are no other SVG path elements
  present. None of the strokes contains a path with more than one
  sub-path, that is to say there are no strokes with more than one
  "moveto" element.
</p>

<h4 id="stroke-id">id</h4>

<p>
  The KanjiVG identification number for this stroke. It contains the
  Unicode value of the kanji as a five-digit lower-case hexadecimal
  number, followed by a hyphen and the letter "s", followed by a decimal
  number from one to the total stroke count.
</p>
<p>
  The stroke numbers are consecutive positive whole numbers starting
  from 1 which correspond to the stroke numbers.
</p>

<h3>KVG namespace attributes</h3>

<p>
  These attributes are under the <code>kvg:</code> namespace.
</p>

<h4 id="type">type</h4>

<p>
  The shape of the stroke. It can be used to know how the stroke
  should be rendered.
</p>

<p>
  The values of this attribute use the keys of
  Unicode's <a href="https://www.unicode.org/charts/PDF/U31C0.pdf">CJK
  Strokes</a>, which occupy code positions from U+31C0 to U+31EF.
</p>
<dl>
<dd>
㇔
<dt>
<b>CJK Stroke D</b> This is used for a short dash. The dash may slant
either down and left, such as the left stroke of 心 or 灬, or down and
right, such as the right strokes of 心 or 灬.
<dd>
<dt>
</dl>

<p>
  In some cases another field consisting of alphabetical
  letters. <span class='undocumented'>These letters refer to a set of
  stroke types which Ulrich Apel designed but has not documented. The
  letters seem to indicate the intersections of the ends of strokes
  with other strokes.</span>
</p>

<dl>
<dt>a
<dd>
End touches middle part of other stroke
<dt>b
<dd>
End touches end of other stroke
<dt>c
<dd>
<span class='undocumented'>Unknown</span>
<dt>v
<dd>
<span class='undocumented'>Unknown</span>
</dl>

<p>
  Where the value has two possibilities, a slash is used to separate
  them. For example, the bottom dash in 冬 (fuyu, "winter") may slant
  either upwards or downwards, so this is represented
  by <code>kvg:type="㇔/㇀"</code> in the KanjiVG source file.
</p>

<h2 id='stroke-numbers'>Stroke numbers</h2>

<p>
  Stroke numbers are represented by a top-level group with an ID of
  the form <code>kvg:StrokeNumbers_abcde</code>,
  where <code>abcde</code> is the identifier of the file. This group
  contains <code>text</code> elements. Each text element is located on
  the diagram using a <code>transform</code> attribute. The text
  within each text element is the stroke number in digits, from one to
  the total number of strokes. The stroke numbers <em>should</em>
  correspond to the <a href="#stroke-id">id value of the individual
  strokes</a>.
</p>
<p>
  The stroke numbers are located to the side of the beginning of the
  stroke whose order they indicate. Generally, they should not overlap
  the strokes.
</p>
