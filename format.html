---
layout: default
title: Format
name: format.html
---

<div class="page-header">
  <h1>KanjiVG file format</h1>
</div>

<p>
  KanjiVG is designed as an extension of SVG. All KanjiVG files are
  100% SVG-compliant and can be opened by any SVG viewer or editor
  as-is. The shape of each kanji stroke (an individual line) is
  described as an
  <a href="http://www.w3.org/TR/SVG/paths.html#PathData">SVG path</a>
  on an area of size 109x109.
</p>

<p>
  The SVG file is organized in such a way that it reflects the
  structure and stroke order of the kanji.  Furthermore, several
  additional attributes are added in order to provide extra
  information about the kanji's structure.
</p>


<h2>Groups</h2>

<p>
  Kanji are often made of several components, and KanjiVG uses
  <a href="http://www.w3.org/TR/SVG/struct.html#Groups">SVG groups</a>
  to reflect this organization. For instance,
  <a href="viewer.html?kanji=頑">頑</a> can be seen as a combination of
  <a href="viewer.html?kanji=元">元</a> on its left and
  <a href="viewer.html?kanji=頁">頁</a> on its right. SVG groups
  provide an elegant way to bind strokes to a given group.
</p>

<p>
  There are two root SVG groups. The <strong>StrokePaths</strong>
  group is a set of standard SVG paths that gives the strokes of the
  kanji in the right order, and describes the structure of the kanji
  as explained above with extra attributes.
</p>

<p>
  The <strong>StrokeNumbers</strong> group is an optional group that
  gives a convenient position for stroke-order numbers, useful for
  displaying in printed material for instance. The stroke numbers are
  positioned near their corresponding strokes, at their starting
  points.
</p>

<p>
  The rest of this page explains the additional SVG attributes used
  in <strong>StrokePaths</strong> that describe the kanji structure.
</p>

<h2>Group attributes</h2>

<p>
  All these attributes are placed under the <strong>kvg</strong> namespace.
</p>


<h3 id="element">element</h3>

<p>
  This attribute specifies which kanji best represents the group
  physically. It should be the Unicode character that resembles the
  group as much as possible.
</p>

<h3 id="group-id">id</h3>

<p>
The KanjiVG identification number for this group. It contains the
Unicode value of the kanji as a five-digit lower-case hexadecimal
number, followed by a hyphen and the letter "g", followed by a decimal
number from one to the total number of groups.
</p>

<h3 id="number">number</h3>

<p>
  This attribute allows a group to be identified if its element is
  represented several times in the kanji.
</p>

<h3 id="original">original</h3>

<p>
  This attribute specifies which kanji represents the group from a
  semantic point of view.  This attribute only needs to be present if
  there is a difference between the semantic and physical
  representation of the group.
</p>

<p>
  For example, <a href="viewer.html?kanji=仮">仮</a> has two groups.
  The left one has <a href="viewer.html?kanji=亻">亻</a>
  (called <em>ninben</em>) for its <code>element</code> attribute, and
  <a href="viewer.html?kanji=人">人</a>, meaning "person", for
  its <code>original</code> attribute, because <em>ninben</em> is a
  variation of 人.  However, the right side has
  <a href="viewer.html?kanji=反">反</a> for <code>element</code>,
  which is not a variation, so an <code>original</code> attribute is
  not necessary.
</p>

<figure>
<pre>
&lt;g id="kvg:StrokePaths_04eee" style="fill:none;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;"&gt;
&lt;g id="kvg:04eee" kvg:element="仮"&gt;
	&lt;g id="kvg:04eee-g1" <span style='color:red'>kvg:element="亻"</span> kvg:variant="true" <span style='color:red'>kvg:original="人"</span> kvg:position="left" kvg:radical="general"&gt;
		&lt;path id="kvg:04eee-s1" kvg:type="㇒" d="M32.01,17c0.22,1.93-0.31,3.72-1.02,5.37C26.5,32.93,20.8,42.85,10.5,55.7"/&gt;
		&lt;path id="kvg:04eee-s2" kvg:type="㇑" d="M25.48,37.5c0.57,0.57,1,1.69,1,3.24c0,11.3,0,33.32,0,46.02c0,3.05,0,5.56,0,7.25"/&gt;
	&lt;/g&gt;
	&lt;g id="kvg:04eee-g2" <span style='color:red'>kvg:element="反"</span> kvg:position="right" kvg:phon="叚V/反"&gt;
		&lt;g id="kvg:04eee-g3" kvg:element="厂"&gt;
			&lt;path id="kvg:04eee-s3" kvg:type="㇐" d="M47.34,22.01c1.27,0.33,3.61,0.53,4.86,0.33c11.42-1.84,23.3-4.59,32.75-5.84c2.08-0.27,3.38,0.16,4.44,0.32"/&gt;
			&lt;path id="kvg:04eee-s4" kvg:type="㇒" d="M52.65,23.81c1.14,1.14,1.49,2.48,1.42,4.7c-0.74,22.33-5.06,47.31-16.01,61.4"/&gt;
		&lt;/g&gt;
		&lt;g id="kvg:04eee-g4" kvg:element="又"&gt;
			&lt;path id="kvg:04eee-s5" kvg:type="㇇" d="M56.7,41.74c1.51,0.37,2.95,0.43,5.97-0.13c3.02-0.56,15.29-4.17,17.37-4.71c2.97-0.77,4.79,1.08,3.83,4.1c-6.62,20.75-11.62,38.63-36.26,53.52"/&gt;
			&lt;path id="kvg:04eee-s6" kvg:type="㇏" d="M56.12,52.12c5.64,0.81,18.99,22.02,31.03,33.71c2.35,2.29,5.22,4.66,7.84,6.11"/&gt;
		&lt;/g&gt;
	&lt;/g&gt;
&lt;/g&gt;
&lt;/g&gt;
</pre>
<figcaption>
Illustration of the structure of the KanjiVG file for 仮 (U+4EEE).
</figcaption>
</figure>

<h3 id="part">part</h3>

<p>
  When the elements of a group of kanji strokes which forms a larger
  unit are not consecutive strokes, the group of strokes may be spread
  over several groups of paths in the file. The <strong>part</strong>
  attribute allows numbering these groups and defined them as being
  part of the same component.
</p>

<h3 id="partial">partial</h3>

<p>
  Should be present and set to <strong>true</strong> if the group only
  represents the <strong>element</strong> attribute partially, i.e. if
  not all its strokes are present.
</p>

<h3 id="phon">phon</h3>

<p>
  A large number of kanji consist of a radical and a phoneticum, the
  Sino-Japanese pronunciation. The <code>phon</code> attribute should
  mark the part indicating the pronunciation.
</p>

<h3 id="position">position</h3>
<p>
  Defines where this groups is located with respect to the other
  groups with the same parent. Possible values are
</p>
<dl>
<dt>bottom
<dd>
This part is under another part
<dt>kamae
<dd>
This part is wrapped around another part, such as 門.
<dt>kamae1
<dd>
<dt>kamae2
<dd>
<dt>left
<dd>
This part is left of another part
<dt>nyo
<dd>
This part is left and under another part, such as 辶.
<dt>right
<dd>
This part is right of another part
<dt>tare
<dd>
This part is left and above another part, such as 广.
<dt>top
<dd>
This part is above another part.
</dl>

<h3 id="radical">radical</h3>

<p>
  Defines if this group is considered as a radical of the kanji, and
  by which reference. Possible values:
  <strong>general</strong> for the generally accepted
  radical, <strong>nelson</strong> for the radicals from the original
  Nelson kanji dictionary, or <strong>tradit</strong> where the Kangxi
  radical disagrees with Nelson.
</p>
<p>
This use of the Nelson radicals is based on that
of <a href="">Kanjidic</a>.
</p>

<figure>
<pre>
&lt;g id="kvg:04e94" kvg:element="五"&gt;
	<span style='color:red'>&lt;g id="kvg:04e94-g1" kvg:element="二" kvg:part="1" kvg:radical="tradit"&gt;</span>
		<span style='color:red'>&lt;g id="kvg:04e94-g2" kvg:element="一" kvg:radical="nelson"&gt;</span>
			&lt;path id="kvg:04e94-s1" kvg:type="㇐" d="M31.75,23.15c2.8,0.67,5.54,0.42,8.36,0.12c9.3-0.99,22.18-2.4,34.14-3.21c2.49-0.17,5.04-0.33,7.5,0.2"/&gt;
		&lt;/g&gt;
	&lt;/g&gt;
	&lt;path id="kvg:04e94-s2" kvg:type="㇑a" d="M55.75,25.25c0.62,1.25,1.02,3.01,0.5,5c-3.12,11.88-14,44.12-19.75,59"/&gt;
	&lt;path id="kvg:04e94-s3" kvg:type="㇕c" d="M25.5,55.25c2.07,1.24,4.73,1.03,7,0.81c15.49-1.45,29.89-3.03,42.25-4.06c3-0.25,4.25,1.75,3.5,3.75c-2.24,5.96-6,20.75-7.75,31.5"/&gt;
	<span style='color:red'>&lt;g id="kvg:04e94-g3" kvg:element="二" kvg:part="2" kvg:radical="tradit"&gt;</span>
		&lt;path id="kvg:04e94-s4" kvg:type="㇐" d="M11.25,90.5c3.04,0.81,6.52,0.63,9.63,0.41c15.71-1.1,43.9-2.8,67.75-3.8c3.41-0.14,6.9-0.4,10.25,0.39"/&gt;
	&lt;/g&gt;
&lt;/g&gt;
</pre>
<figcaption>
  The kanji for "five", 五, has a traditional radical 二 which is split
  into two parts, the upper and lower character, and a Nelson radical of
  一, which is the upper character. The two parts of the 二 are
  given <a href="#part">part</a> numbers of 1 and 2.
</figcaption>
</figure>

<h3 id="radicalForm">radicalForm</h3>

<p>
  This is set to the value <strong>true</strong> for a limited number
  of groups where a radical-like form of a character described
  by <a href="#original">original</a> is provided as
  the <a href="#element">element</a>.
</p>

<h3 id="tradForm">tradForm</h3>

<p>
  The Kanjidic file with which Ulrich Apel worked in the beginning
  favored the radicals given in the Nelson character dictionary, which
  sometimes differ from the radicals given in "traditional" Japanese
  dictionaries and have mark-up as well.
</p>

<h3 id="variant">variant</h3>
<p>
  Should be present and set to <strong>true</strong> if the group is
  from the
  <strong>element</strong> attribute.
</p>

<h2>Strokes</h2>

<p>
  Kanji strokes are represented by the SVG &lt;path&gt; element.
</p>


<h2>Stroke attributes</h2>

<h3 id="d">d</h3>
<p>
The SVG path information itself. This describes the shape of the line.
</p>

<h3 id="stroke-id">id</h3>

<p>
  The KanjiVG identification number for this stroke. It contains the
  Unicode value of the kanji as a five-digit lower-case hexadecimal
  number, followed by a hyphen and the letter "s", followed by a decimal
  number from one to the total stroke count.
</p>

<h3 id="type">type</h3>

<p>
  The shape of the stroke. It can be used to know how the stroke
  should be rendered.
</p>

<p>
  The values of this attribute use the keys of
  Unicode's <a href="https://www.unicode.org/charts/PDF/U31C0.pdf">CJK
    Strokes</a>, which occupy code positions from U+31C0 to U+31EF, plus
  in some cases another field consisting of alphabetical letters. These
  letters refer to a set of stroke types which Ulrich Apel designed but
  has not documented.
</p>

<p>
  Where the value has two possibilities, a slash is used to separate
  them. For example, the bottom dash in 冬 (fuyu, "winter") may slant
  either upwards or downwards, so this is represented
  by <code>kvg:type="㇔/㇀"</code> in the KanjiVG source file.
</p>

